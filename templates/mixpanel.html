<!-- start Mixpanel -->
<script type="text/javascript">
(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);

mixpanel.init("bd91546ef3426049deb32087461d6f9e");

(function() {
	
	var Cookie = {
		getItem: function (sKey) {
			if (!sKey) { return null; }
			return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null;
		},
		setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
			if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return false; }
			var sExpires = "";
			if (vEnd) {
				switch (vEnd.constructor) {
					case Number:
						sExpires = vEnd === Infinity ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age=" + vEnd;
						break;
					case String:
						sExpires = "; expires=" + vEnd;
						break;
					case Date:
						sExpires = "; expires=" + vEnd.toUTCString();
						break;
				}
			}
			document.cookie = encodeURIComponent(sKey) + "=" + encodeURIComponent(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
			return true;
		},
	};

	var GET = {};

	if (document.location.toString().indexOf('?') !== -1) {
		var query = document.location.toString().replace(/^.*?\?/, '').replace(/#.*$/, '').split('&');
		for (var i=0, l=query.length; i<l; i++) {
			var aux = decodeURIComponent(query[i]).split('=');
			GET[aux[0]] = aux[1];
		}
	}

	function isValidMixPanelId(mixPanelId) {
		if (mixPanelId && mixPanelId.length == 32) {
			return true;
		}
		return false;
	}

	// Set up and initialize mixpanel

	var mixPanelIdKey = "mp_id";
	var mixPanelIdFromCookie = Cookie.getItem(mixPanelIdKey);
	var mixPanelIdFromUrl = GET[mixPanelIdKey];

	if (isValidMixPanelId(mixPanelIdFromCookie)) {
		mixpanel.identify(mixPanelIdFromCookie);
	}
	
	else if (isValidMixPanelId(mixPanelIdFromUrl)) {
		Cookie.setItem(mixPanelIdKey, mixPanelIdFromUrl);

		mixpanel.alias(mixPanelIdFromUrl);
		mixpanel.identify(mixPanelIdFromUrl);
		
		mixpanel.people.set_once({
			'First Visit': new Date(Cookie.getItem("page.visit.first"))
		});
	}

	// Track the first page visit

	if (!Cookie.getItem("page.visit.first")) {
		mixpanel.track("page.visit.first", {
			"title": document.title,
    		"url": window.location.pathname
		})
		Cookie.setItem("page.visit.first", (new Date()).toString())
	}

})()

</script>

<!-- end Mixpanel -->